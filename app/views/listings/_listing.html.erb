<% url = listing.url + listing.source.affiliate_param_string.to_s %>

<%= link_to url, class: "listing", target: "_blank", rel: "noreferrer nofollow noopener", aria: { labelledby: "listing-#{listing.id}" } do %>
  <%= image_tag (listing.source.logo.attached? ? rails_public_blob_url(listing.source.logo.variant(:medium)) : ""), class: "listing__image", alt: "" %>

  <span class="listing__content">
    <span class="listing__name" id="listing-<%= listing.id %>"><%= listing.source.name %></span>

    <%= render "listings/price", price: listing.price %>

    <span class="listing__condition">
      <%= listing.condition_label %>
      <%= tag.span "(#{listing.condition_details})" if listing.condition_details.present? %>
    </span>

    <span class="listing__shipping">
      <%= listing.shipping_label %>
    </span>
  </span>
<% end %>
